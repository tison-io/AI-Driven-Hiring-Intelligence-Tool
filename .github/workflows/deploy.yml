name: Deploy to Production

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  deploy:
    name: Deploy Services
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Deploy Backend
        if: success()
        run: |
          echo "Deploying backend to production..."
          curl -X POST "${{ secrets.RENDER_DEPLOY_HOOK_BACKEND }}" || echo "Backend deploy hook not configured"
      
      - name: Deploy AI Service
        if: success()
        run: |
          echo "Deploying AI service to production..."
          curl -X POST "${{ secrets.RENDER_DEPLOY_HOOK_AI }}" || echo "AI service deploy hook not configured"
      
      - name: Deploy Frontend
        if: success()
        run: |
          echo "Deploying frontend to production..."
          echo "Vercel auto-deploys from main branch"
      
      - name: Deployment Summary
        if: success()
        run: |
          echo "âœ… Deployment triggered successfully"
          echo "Backend: Check Render dashboard"
          echo "AI Service: Check Render dashboard"
          echo "Frontend: Check Vercel dashboard"
